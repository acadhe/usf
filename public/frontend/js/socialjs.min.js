/*! socialjs - v2.0.0-beta - 2016-06-29
* https://github.com/SubZane/socialjs
* Copyright (c) 2016 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.socialjs=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d,e={},f=!!document.querySelector&&!!a.addEventListener,g=0,h=0,i=0,j=0,k=0,l=0,m={container:".socialjs",fetchCounts:!0,shortCount:!0,urls:{GooglePlus:"backend/GooglePlusCall.php",Pinterest:"backend/PinterestCall.php",Facebook:"http://graph.facebook.com/",Linkedin:"http://www.linkedin.com/countserv/count/share",Reddit:"http://www.reddit.com/api/info.json"},onInit:function(){},OnAttachEvents:function(){},onDestroy:function(){},onClick:function(){}},n=function(){var a=d.querySelectorAll(".sharebutton");F(a,function(a){"twitter"===a.getAttribute("data-sharetype")?(x(a),b.fetchCounts&&o(a)):"facebook"===a.getAttribute("data-sharetype")?(t(a),b.fetchCounts&&p(a)):"linkedin"===a.getAttribute("data-sharetype")?(u(a),b.fetchCounts&&q(a)):"googleplus"===a.getAttribute("data-sharetype")?(w(a),b.fetchCounts&&s(a)):"reddit"===a.getAttribute("data-sharetype")&&(v(a),b.fetchCounts&&r(a))}),D("OnAttachEvents")},o=function(a){var b=A(a,"basecount");a.querySelector(".count").innerHTML=y(b),g+=b,h=b},p=function(a){var c=b.urls.Facebook+"?id="+z(a),d=new XMLHttpRequest;d.open("GET",c,!0),d.onload=function(){if(d.status>=200&&d.status<400){var b=0,c=JSON.parse(d.response);"undefined"!=typeof c.shares?(b=parseInt(A(a,"basecount"))+parseInt(c.shares,10),a.querySelector(".count").innerHTML=y(b),g+=b,i=b):(b=parseInt(A(a,"basecount")),a.querySelector(".count").innerHTML=y(b),g+=b,i=b)}},d.onerror=function(){},d.send()},q=function(a){var c=b.urls.Linkedin+"?url="+z(a);B(c,function(b){var c=parseInt(A(a,"basecount"))+parseInt(b.count,10);a.querySelector(".count").innerHTML=y(c),g+=c,j=c})},r=function(a){var c=b.urls.Reddit+"?url="+z(a),d=new XMLHttpRequest;d.open("GET",c,!0),d.onload=function(){if(d.status>=200&&d.status<400){var b=JSON.parse(d.response),c=0;Array.isArray(b.data.children)&&b.data.children.length?(c=parseInt(A(a,"basecount"))+parseInt(b.data.children[0].data.score,10),a.querySelector(".count").innerHTML=y(c),g+=c,l=c):(c=parseInt(A(a,"basecount")),a.querySelector(".count").innerHTML=y(c),g+=c,l=c)}},d.onerror=function(){},d.send()},s=function(a){var c=b.urls.GooglePlus+"?url="+z(a),d=new XMLHttpRequest;d.open("GET",c,!0),d.onload=function(){if(d.status>=200&&d.status<400){var b=JSON.parse(d.response),c=parseInt(A(a,"basecount"))+parseInt(b,10);a.querySelector(".count").innerHTML=y(c),g+=c,k=c}},d.onerror=function(){},d.send()},t=function(a){a.addEventListener("click",function(b){b.preventDefault(),D("onClick");{var c=z(a),d="u="+encodeURIComponent(c);encodeURIComponent(c)}return window.facebook=window.facebook||{},window.facebook.shareWin=window.open("https://www.facebook.com/sharer/sharer.php?"+d,"",C()),!1})},u=function(a){a.addEventListener("click",function(b){b.preventDefault(),D("onClick");{var c=a.hasAttribute("data-referer")?a.getAttribute("data-referer"):"",d=z(a),e="original_referer="+encodeURIComponent(c)+"&url="+encodeURIComponent(d);encodeURIComponent(d)}return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://www.linkedin.com/cws/share?"+e+"&isFramed=true","",C()),!1})},v=function(a){a.addEventListener("click",function(b){b.preventDefault(),D("onClick");{var c=z(a),d="url="+encodeURIComponent(c);encodeURIComponent(c)}return window.Reddit=window.Reddit||{},window.Reddit.shareWin=window.open("http://www.reddit.com/submit?"+d,"",C()),!1})},w=function(a){a.addEventListener("click",function(b){b.preventDefault(),D("onClick");{var c=a.hasAttribute("data-text")?a.getAttribute("data-text"):"",d=z(a),e="text="+encodeURIComponent(c)+"&url="+encodeURIComponent(d);encodeURIComponent(d)}return window.GooglePlus=window.GooglePlus||{},window.GooglePlus.shareWin=window.open("https://plus.google.com/share?"+e,"",C()),!1})},x=function(a){a.addEventListener("click",function(b){b.preventDefault(),D("onClick");{var c=a.hasAttribute("data-text")?a.getAttribute("data-text"):"",d=z(a),e=a.hasAttribute("data-via")?a.getAttribute("data-via"):"",f=a.hasAttribute("related")?a.getAttribute("related"):"",g="text="+encodeURIComponent(c)+"&url="+encodeURIComponent(d)+"&via="+e+"&related="+f;encodeURIComponent(d)}return window.Twitter=window.Twitter||{},window.Twitter.shareWin=window.open("https://twitter.com/intent/tweet?"+g,"",C()),!1})},y=function(a){return b.shortCount&&(a>=1e6?a=parseInt((a/1e6).toFixed(2),10)+"M":a>=1e3&&(a=parseInt((a/1e3).toFixed(1),10)+"k")),a},z=function(a){var b=a.getAttribute("data-url");return"undefined"!=typeof b&&null!==b&&""!==b?b:window.location.href},A=function(a,b){var c=a.getAttribute("data-"+b);return"undefined"!=typeof c?c:""},B=function(a,b){var c="jsonp_callback_"+Math.round(1e5*Math.random());window[c]=function(a){delete window[c],document.body.removeChild(d),b(a)};var d=document.createElement("script");d.src=a+(a.indexOf("?")>=0?"&":"?")+"callback="+c,document.body.appendChild(d)},C=function(){{var a=550,b=335,c=screen.height,d=screen.width,e=Math.round(d/2-a/2),f=0;document}return c>b&&(f=Math.round(c/2-b/2)),"left="+e+",top="+f+",width="+a+",height="+b+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"},D=function(a){void 0!==b[a]&&b[a].call(d)},E=function(a,b){var c={};return F(a,function(b,d){c[d]=a[d]}),F(b,function(a,d){c[d]=b[d]}),c},F=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)};return e.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),b=null,c=null,D("onDestroy"))},e.init=function(a){f&&("localhost"===document.location.hostname&&console.warn("SocialJS will not work properly when run on localhost. The URL must be accessible from the outside."),e.destroy(),b=E(m,a||{}),d=document.querySelector(b.container),n(),D("onInit"))},e.getCount={Total:function(){return g},Facebook:function(){return i},Linkedin:function(){return j},GooglePlus:function(){return k},Reddit:function(){return l}},e});